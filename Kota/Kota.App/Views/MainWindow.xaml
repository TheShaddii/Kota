<Window x:Class="Kota.App.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Kota - Local Inventory Management" Height="700" Width="1200"
        WindowStartupLocation="CenterScreen" WindowState="Maximized">

    <Window.Resources>
        <Style TargetType="Button" x:Key="ToolbarButtonStyle">
            <Setter Property="Padding" Value="10,5"/>
            <Setter Property="Margin" Value="5,0"/>
            <Setter Property="Background" Value="#2E7D32"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#388E3C"/>
                </Trigger>
                <Trigger Property="IsEnabled" Value="False">
                    <Setter Property="Background" Value="#CCCCCC"/>
                    <Setter Property="Foreground" Value="#666666"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style TargetType="DataGridRow">
            <Style.Triggers>
                <DataTrigger Binding="{Binding IsLowStock}" Value="True">
                    <Setter Property="Background" Value="#FFEBEE"/>
                    <Setter Property="Foreground" Value="#C62828"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Menu Bar -->
        <Menu Grid.Row="0" Background="#F5F5F5" Padding="5">
            <MenuItem Header="Settings">
                <MenuItem Header="Database Configuration"/>
                <MenuItem Header="Location Management" Click="LocationManagement_Click"/>
                <Separator/>
                <MenuItem Header="User Management"/>
                <Separator/>
                <MenuItem Header="Logout"/>
            </MenuItem>
            <MenuItem Header="Help">
                <MenuItem Header="About"/>
            </MenuItem>
        </Menu>

        <!-- Toolbar -->
        <Border Grid.Row="1" Background="#E8F5E8" Padding="10" BorderBrush="#C8E6C9" BorderThickness="0,0,0,1">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Action Buttons -->
                <StackPanel Grid.Column="0" Orientation="Horizontal">
                    <Button Content="Add New Item" Style="{StaticResource ToolbarButtonStyle}"
                            Click="AddItem_Click"/>
                    <Button Content="Bulk Add" Style="{StaticResource ToolbarButtonStyle}"/>
                    <Button Content="Bulk Remove" Style="{StaticResource ToolbarButtonStyle}"/>
                    <Button Content="Bulk Delete" Style="{StaticResource ToolbarButtonStyle}" Background="#D32F2F"/>
                    <Button Content="Refresh" Style="{StaticResource ToolbarButtonStyle}" Background="#1976D2"/>
                </StackPanel>

                <!-- Search -->
                <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Center" Margin="20,0">
                    <TextBlock Text="Search:" VerticalAlignment="Center" Margin="0,0,10,0" FontWeight="SemiBold"/>
                    <TextBox Width="300" Padding="8,5" VerticalAlignment="Center"
                             Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}"
                             BorderBrush="#4CAF50" BorderThickness="2"/>
                </StackPanel>

                <!-- Status -->
                <StackPanel Grid.Column="2" Orientation="Horizontal">
                    <Button Content="Low Stock (0)" 
                            Style="{StaticResource ToolbarButtonStyle}" Background="#FF9800"/>
                    <TextBlock Text="{Binding CurrentUser, StringFormat='User: {0}'}" 
                              VerticalAlignment="Center" Margin="15,0,0,0" FontWeight="SemiBold"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Main Data Grid -->
        <DataGrid Grid.Row="2" x:Name="ItemsGrid" 
                  ItemsSource="{Binding Items}"
                  AutoGenerateColumns="False" 
                  CanUserAddRows="False"
                  CanUserDeleteRows="False"
                  IsReadOnly="True"
                  GridLinesVisibility="Horizontal"
                  HeadersVisibility="Column"
                  SelectionMode="Extended"
                  RowHeaderWidth="0">

            <DataGrid.Columns>
                <DataGridCheckBoxColumn Header="Select" Width="50"/>
                <DataGridTextColumn Header="ID" Binding="{Binding Id}" Width="60"/>
                <DataGridTextColumn Header="SKU" Binding="{Binding ManufacturerSku}" Width="120"/>
                <DataGridTextColumn Header="Description" Binding="{Binding Description}" Width="300"/>
                <DataGridTextColumn Header="Qty On Hand" Binding="{Binding QtyOnHand}" Width="100"/>
                <DataGridTextColumn Header="Min Qty" Binding="{Binding MinQty}" Width="80"/>
                <DataGridTextColumn Header="Site" Binding="{Binding Site}" Width="100"/>
                <DataGridTextColumn Header="Building" Binding="{Binding Building}" Width="100"/>
                <DataGridTextColumn Header="Room" Binding="{Binding Room}" Width="100"/>
                <DataGridTextColumn Header="Area" Binding="{Binding Area}" Width="100"/>
                <DataGridTextColumn Header="Storage Unit" Binding="{Binding StorageUnit}" Width="120"/>
                <DataGridTextColumn Header="Bin/Slot" Binding="{Binding Bin}" Width="100"/>
                <DataGridTemplateColumn Header="Notes" Width="60">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock Text="📝" ToolTip="{Binding Notes}" 
                                     Visibility="{Binding Notes, Converter={StaticResource StringToVisibilityConverter}}"/>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid>

        <!-- Status Bar -->
        <StatusBar Grid.Row="3" Background="#F5F5F5" Padding="10,5">
            <StatusBarItem>
                <TextBlock Text="Items: 0"/>
            </StatusBarItem>
            <Separator/>
            <StatusBarItem>
                <TextBlock Text="Low Stock: 0" Foreground="#FF9800"/>
            </StatusBarItem>
            <StatusBarItem HorizontalAlignment="Right">
                <TextBlock Text="Ready"/>
            </StatusBarItem>
        </StatusBar>
    </Grid>
</Window>